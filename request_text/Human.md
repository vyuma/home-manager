# 人間が行うべきタスク一覧

このドキュメントは、本の管理アプリケーション開発において**人間が手動で行う必要があるタスク**をまとめたものです。

---

## 1. 外部サービス設定

### 1.1 Google Cloud Console設定（必須・Phase 1）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| GCPプロジェクト作成 | Google Cloud Consoleで新規プロジェクトを作成 | 高 |
| OAuth同意画面設定 | アプリ名、サポートメール、スコープ（email, profile）を設定 | 高 |
| OAuth 2.0クライアントID作成 | 「ウェブアプリケーション」タイプで作成 | 高 |
| リダイレクトURI設定 | `http://localhost:3000/api/auth/callback/google` を追加 | 高 |
| 本番用リダイレクトURI追加 | デプロイ後に本番URLを追加 | 中 |
| クライアントID/シークレット取得 | `.env`ファイルに設定するための値を取得 | 高 |

**手順**:
1. https://console.cloud.google.com/ にアクセス
2. 新規プロジェクト作成
3. 「APIとサービス」→「OAuth同意画面」を設定
4. 「認証情報」→「認証情報を作成」→「OAuthクライアントID」
5. クライアントIDとシークレットをメモ

---

### 1.2 Google Books API設定（必須・Phase 4）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| Books APIの有効化 | Google Cloud ConsoleでBooks APIを有効化 | 高 |
| APIキー作成 | 「認証情報」→「APIキーを作成」 | 高 |
| APIキー制限設定（推奨） | Books APIのみに制限、リファラー制限設定 | 中 |

---

### 1.3 SLM API設定（任意・Phase 14）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| SLMサービス選定 | OpenAI / Anthropic / Ollama等から選択 | 低 |
| アカウント作成・契約 | 選定したサービスでアカウント作成 | 低 |
| APIキー取得 | サービスからAPIキーを取得 | 低 |
| 料金プラン確認 | 使用量と料金を確認 | 低 |

---

## 2. 環境変数設定

### 2.1 必須環境変数の設定（Phase 0）

`.env`ファイルに以下を設定:

```env
# Database（Docker Compose使用時は設定済み）
DATABASE_URL="postgresql://user:password@localhost:5432/bookmanager?schema=public"

# NextAuth（人間が生成・設定）
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="ランダムな文字列を生成して設定"

# Google OAuth（GCPから取得して設定）
GOOGLE_CLIENT_ID="取得したクライアントID"
GOOGLE_CLIENT_SECRET="取得したクライアントシークレット"

# Google Books API（GCPから取得して設定）
GOOGLE_BOOKS_API_KEY="取得したAPIキー"
```

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| NEXTAUTH_SECRET生成 | `openssl rand -base64 32` で生成 | 高 |
| Google認証情報設定 | GCPから取得した値を設定 | 高 |
| DATABASE_URL確認 | Docker環境に合わせて確認 | 高 |

---

## 3. デザイン・UI確認

### 3.1 デザインレビュー（Phase 0, 13）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| カラーパレット確認 | ネオンシアン・パープルの配色確認 | 中 |
| Glassmorphism効果確認 | 透明感・ブラー効果の見え方確認 | 中 |
| ダークモード確認 | 背景色とテキストのコントラスト確認 | 中 |
| モバイル表示確認 | レスポンシブデザインの確認 | 中 |
| アクセシビリティ確認 | コントラスト比、フォーカス表示確認 | 中 |

---

### 3.2 UXフロー確認

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| 本登録フロー確認 | バーコード→検索→本棚選択→登録の流れ確認 | 高 |
| 未確定本→本棚配置フロー確認 | ワンタッチ操作の使いやすさ確認 | 高 |
| 蔵書点検フロー確認 | 連続スキャンの操作性確認 | 中 |
| 本詳細モーダル確認 | 編集項目（本棚・ステータス・メモ）の配置確認 | 中 |

---

## 4. データベース確認

### 4.1 ER図レビュー（Phase 2）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| テーブル構造確認 | 12テーブルの設計が要件を満たすか確認 | 高 |
| リレーション確認 | 1:N, 1:1関係が正しいか確認 | 高 |
| インデックス設計確認 | 検索性能に必要なインデックス確認 | 中 |
| marathonPostedフィールド確認 | 読書マラソン機能の要件確認 | 中 |

**確認すべきテーブル**:
- User, Account, Session（認証）
- Book（書籍マスタ）
- Bookshelf（本棚）
- OwnedBook（所有本 + marathonPosted）
- UnshelvedBook（未確定の本）
- WantedBook（欲しい本）
- Location, ReadBook（読んだ本）
- AutoReview（AI感想）

---

## 5. テスト関連

### 5.1 実機テスト（Phase 5, 7）

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| バーコードスキャンテスト | 実際のスマートフォンでカメラ動作確認 | 高 |
| ISBN読み取り精度確認 | 様々な本のバーコードで読み取り確認 | 高 |
| 連続スキャンテスト | 蔵書点検モードで連続読み取り確認 | 中 |
| カメラ権限フロー確認 | 権限リクエストのUX確認 | 中 |

---

### 5.2 E2Eテスト手動確認

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| 認証フロー確認 | Googleログイン→ダッシュボード表示 | 高 |
| 本登録フロー確認 | 手動入力での本登録 | 高 |
| 本棚管理フロー確認 | 作成→編集→削除 | 高 |
| 検索機能確認 | タイトル・著者での検索 | 中 |

---

### 5.3 CI/CD設定

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| GitHub Actions設定 | リポジトリでワークフロー有効化 | 中 |
| Codecov連携 | Codecovアカウント作成、トークン設定 | 低 |
| テスト用シークレット設定 | GitHub Secretsに環境変数設定 | 中 |

---

## 6. デプロイ準備

### 6.1 本番環境設定

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| ホスティング先選定 | Vercel / Railway / 自前サーバー等 | 中 |
| 本番用データベース作成 | PostgreSQL（Supabase / Neon / Railway等） | 中 |
| 本番用環境変数設定 | 本番用の各種キー・URLを設定 | 中 |
| ドメイン設定（任意） | カスタムドメインの設定 | 低 |
| SSL証明書確認 | HTTPS設定の確認 | 中 |

---

### 6.2 Google OAuth本番設定

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| 本番用リダイレクトURI追加 | `https://your-domain.com/api/auth/callback/google` | 中 |
| OAuth同意画面の公開 | 「本番環境に公開」の申請 | 中 |
| ドメイン確認（必要に応じて） | Search Consoleでのドメイン確認 | 低 |

---

## 7. 運用・保守

### 7.1 定期作業

| タスク | 詳細 | 頻度 |
|--------|------|------|
| APIキー・トークンの更新 | 期限切れ前に更新 | 必要に応じて |
| 依存パッケージ更新 | npm audit / npm update | 月1回 |
| データベースバックアップ確認 | バックアップが正常に取れているか確認 | 週1回 |
| エラーログ確認 | 本番環境のエラーログを確認 | 週1回 |

---

## 8. チェックリスト

### 開発開始前（必須）
- [ ] Google Cloud Consoleでプロジェクト作成
- [ ] OAuth 2.0クライアントID作成
- [ ] Books API有効化・APIキー作成
- [ ] `.env`ファイル作成・環境変数設定
- [ ] NEXTAUTH_SECRET生成

### 開発中
- [ ] カラーパレット・デザイン確認
- [ ] ER図レビュー・承認
- [ ] バーコードスキャン実機テスト
- [ ] 各機能のUXフロー確認

### デプロイ前
- [ ] 本番用データベース準備
- [ ] 本番用環境変数設定
- [ ] 本番用OAuth設定（リダイレクトURI追加）
- [ ] E2Eテスト完了確認

### デプロイ後
- [ ] 本番環境動作確認
- [ ] OAuth同意画面の本番公開申請
- [ ] モニタリング設定

---

## 9. 参考リンク

| リソース | URL |
|----------|-----|
| Google Cloud Console | https://console.cloud.google.com/ |
| Google Books API ドキュメント | https://developers.google.com/books |
| NextAuth.js ドキュメント | https://authjs.dev/ |
| Vercel | https://vercel.com/ |
| Railway | https://railway.app/ |
| Supabase | https://supabase.com/ |
